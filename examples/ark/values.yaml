# Ark Example - Helm values
# Usage:
#   cd examples/ark
#   make helm-install   OR   devspace dev

claude:
  claudeDefaultsConfigMap: ark-claude-defaults
  mcpConfigMap: ark-mcp-config
  args:
    - "--dangerously-skip-permissions"
  skills:
    - name: ark-setup
      configMap: ark-skill-setup
    - name: ark-testing
      configMap: ark-skill-testing
    - name: ark-analysis
      configMap: ark-skill-analysis

env:
  CLAUDE_AGENT_NAME: ark-claude-code-agent
  CLAUDE_LOG_PATH: /tmp/claude-code-agent-log.jsonl
  CLAUDE_TIMEOUT_SECONDS: "3600"
  FORCE_COLOR: "1"
  DOCKER_HOST: tcp://localhost:2375
  # OpenTelemetry - send metrics/traces to Phoenix
  CLAUDE_CODE_ENABLE_TELEMETRY: "1"
  OTEL_SERVICE_NAME: claude-code-agent
  OTEL_METRICS_EXPORTER: otlp
  OTEL_LOGS_EXPORTER: otlp
  OTEL_EXPORTER_OTLP_PROTOCOL: grpc
  OTEL_EXPORTER_OTLP_ENDPOINT: phoenix-svc.phoenix.svc.cluster.local:4317

# DinD sidecar for Kind cluster creation
# DOCKER_TLS_CERTDIR="" disables TLS so DinD listens on port 2375 (non-TLS)
# instead of 2376 (TLS). Required for DOCKER_HOST=tcp://localhost:2375 to work.
extraContainers:
  - name: dind
    image: docker:dind
    securityContext:
      privileged: true
    env:
      - name: DOCKER_TLS_CERTDIR
        value: ""
    volumeMounts:
      - name: dind-storage
        mountPath: /var/lib/docker

extraVolumes:
  - name: dind-storage
    emptyDir: {}
